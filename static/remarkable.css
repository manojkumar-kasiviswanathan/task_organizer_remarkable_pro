
:root{
  --paper:#f7f7f5;
  --ink:#1a1a1a;
  --muted:#6d6d6d;
  --stroke:#d8d8d2;
  --accent:#0a7ea4;
  --card:#ffffff;
  --shadow:0 1px 0 rgba(0,0,0,0.02), 0 6px 16px rgba(0,0,0,0.04);
  --doodle-opacity:0.08;
}
:root[data-theme="dark"], html[data-theme="dark"]{
  --paper:#111214;
  --ink:#efefef;
  --muted:#9a9a9a;
  --stroke:#2b2d30;
  --accent:#56b3d6;
  --card:#1a1b1e;
  --shadow:none;
  --doodle-opacity:0.05;
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  background: var(--paper);
  color: var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bg-doodle{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url('bg.jpg');
  background-size: 600px;
  background-repeat: repeat;
  opacity: var(--doodle-opacity);
  z-index: 0;
}

#page{ position: relative; z-index: 1; max-width: 980px; margin: 48px auto; padding: 0 20px; }

.masthead{
  margin-bottom: 28px;
  border-bottom: 1px solid var(--stroke);
  padding-bottom: 16px;
}
.masthead-row{ display:flex; align-items:center; justify-content:space-between; }
.masthead h1{ margin: 0 0 4px 0; font-weight: 600; letter-spacing: .2px; }
.subtitle{ color: var(--muted); margin: 0; }
.controls button{
  border:1px solid var(--stroke);
  background: var(--card);
  color: var(--ink);
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}

.card{
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: 12px;
  padding: 16px;
  margin: 18px 0 24px 0;
  box-shadow: var(--shadow);
}
.card h2{ margin: 0 0 10px 0; font-size: 20px; font-weight: 600; }
.muted{ color: var(--muted); font-weight: 400; }
.group-title{ margin: 10px 0 6px 0; font-size: 13px; }

.grid{ display: grid; grid-template-columns: 1.6fr 0.7fr 1.2fr; gap: 10px; align-items: center; }
.head{ font-size: 12px; text-transform: uppercase; letter-spacing: .06em; color: var(--muted); border-bottom: 1px solid var(--stroke); padding-bottom: 6px; }
.row{ position:relative; padding: 8px 0; border-bottom: 1px solid color-mix(in srgb, var(--stroke) 65%, transparent); }
.row:last-child{ border-bottom: none; }
.inner{ margin-top: 8px; }

.cell.completed{ color: color-mix(in srgb, var(--muted) 80%, transparent); text-decoration: line-through; }

.item{ user-select:none; }
.item.dragging{ opacity: .5; }
.draggable{ min-height: 8px; }

select, input[type=text], button{ font: inherit; }
select, input[type=text]{
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--stroke);
  background: var(--card);
  color: var(--ink);
  border-radius: 8px;
  outline: none;
}
select:focus, input[type=text]:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 20%, transparent);
}

.add{ margin-top: 12px; }
.add button{
  justify-self: start;
  padding: 10px 16px;
  background: var(--ink);
  color: #fff;
  border: 1px solid var(--ink);
  border-radius: 8px;
  cursor: pointer;
}
.add button:hover{ filter: brightness(1.05); }

.archive{ font-size: 14px; color: var(--muted); font-weight: 500; }
.badge{
  display:inline-block;
  background: color-mix(in srgb, var(--accent) 20%, transparent);
  color: var(--ink);
  border:1px solid var(--stroke);
  border-radius: 10px;
  padding: 2px 8px;
  margin-left: 8px;
  font-size: 12px;
}

.accordion details{
  border:1px solid var(--stroke);
  border-radius: 10px;
  background: var(--card);
  padding: 10px 12px;
  margin: 8px 0;
}
.accordion summary{ cursor: pointer; list-style: none; display:flex; align-items:center; justify-content:space-between; }
.accordion summary::-webkit-details-marker{ display:none; }
.accordion summary::after{
  content: "â–¾";
  transition: transform .2s ease;
  margin-left: 8px;
  color: var(--muted);
}
.accordion details[open] summary::after{ transform: rotate(180deg); }
